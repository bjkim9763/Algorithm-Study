## 문제 설명

---

Pi는 i라는 정점에 쌓일 수 있는 물의 기대값이다. 즉, i라는 정점에 쌓이는 물의 평균값이다.

구해야 하는 것은 Pi의 평균값이므로, 평균의 평균을 구하는 문제임을 확인할 수 있다.

모든 물이 평균적으로 분배된다고 가정하면 이 문제는 주어지는 물의 양을 leaf노드로 나누기만 하면 되는 간단한 문제가 된다.

## 접근 방식

---

BFS를 사용해 LEAF노드를 체크하고, 처음에 주어졌던 ( W(물의 양) / LEAF노드수 )를 구해준다. 이 값이 Pi의 평균이다.

## 문제 풀이

---

```cpp
// 백준 17073 나무 위의 빗물
#include <iostream>
#include <vector>
#include <queue>
using namespace std;

// ---------------------------------------------- 문제 이해 --------------------------------------------------
// 
// Pi들의 평균을 구하는 문제. Pi란 한 정점에 모인 물의 양의 기대값이므로 이또한 평균값이다.
// 즉 평균의 평균값을 구하는 문제이기 때문에, 물이 균등하게 분배되지 않았을 상황을 고려할 필요는 없다.
// 문제를 이해했다면 주어지는 물의 양과 트리의 LEAF노드를 구해 간단하게 풀 수 있다.
//  
// -----------------------------------------------------------------------------------------------------------

int N;
int W;
int cnt = 0; // leaf노드의 수를 체크
vector<int> v[5000001];
bool visit[5000001] = { false, };

void BFS() {
	queue<int> q;
	q.push(1);
	visit[1] = true;

	while (!q.empty())
	{
		int idx = q.front();
		q.pop();
		bool can = false;

		for (int i = 0;i < v[idx].size(); i++)
		{
			int next = v[idx][i];
			if (visit[next]) continue;
			visit[next] = true;
			q.push(next);
			can = true;
		}
		if (!can) cnt++;
	}
}

int main(void)
{
	cin >> N >> W;
	for (int i = 0; i < N - 1; i++) // 2개의 정점이 1개의 간선으로 연결되므로 주어진 노드의 수보다 1을 줄여주어야 한다.
	{
		int a, b;
		cin >> a >> b;
		v[a].push_back(b);
		v[b].push_back(a);
	}

	BFS();

	// ---------------------------------- 출력 문제 ---------------------------------------
	// 
	// 출력 부분을 해결하기 위해 인터넷을 검색했다.
	// 계산 결과는 틀리지 않지만, 출력 방법에 문제가 있어서 틀린 결과가 나왔기 때문이다.
	// C++는 과학적 표기법을 사용한다. 즉 333333333.33333를 3.33333e+008로 출력한다. 이때문에 백준에서는 틀린 결과라고 나온다.
	// 때문에 cout.precision(6)을 이용해 소수점 아래 6번째 자리수까지 출력하도록 수정했다.
	// fixed를 사용하지 않으면 정수부분을 포함한 6개의 수를 출력하므로 fixed를 넣어주었다.
	// 
	// ------------------------------------------------------------------------------------

	cout.precision(6);
	cout << fixed << (double) W/cnt << endl;

	return 0;
}
```

## 어려웠던 부분 & 해결 과정

---

문제를 이해하는 것이 까다로웠던 문제이다. 트리의 그래프를 그려서 차근차근 접근하여 이해했다.

의외로 난관이었던 것은 계산 결과에는 문제가 없는데도 백준 사이트에서 틀렸다는 점이다. c++의 숫자 출력 방식 이해가 부족했다.